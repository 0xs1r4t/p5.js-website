<!DOCTYPE html><html><head><meta charset=utf-8><meta content="width=device-width,initial-scale=1" name=viewport><link href=/_astro/_slug_.C79K3bky.css rel=stylesheet /></head><body><nav><ul><a href=/ >Home</a> <a href=/reference>Reference</a> <a href=/tutorials>Tutorials</a> <a href=/examples>Examples</a> <a href=/community>Community</a> <a href=/about>About</a> <a href=/contribute>Contribute</a></ul></nav><div class="flex space-x-2"><select id=locale-select><option value=/contribute//custom_p5_build/ selected=true>English</option><option value=/ar/contribute//custom_p5_build/ >العربية</option><option value=/es/contribute//custom_p5_build/ >español</option><option value=/hi/contribute//custom_p5_build/ >हिन्दी</option><option value=/ko/contribute//custom_p5_build/ >한국어</option><option value=/pt-br/contribute//custom_p5_build/ >português (Brasil)</option><option value=/sk/contribute//custom_p5_build/ >slovenčina</option><option value=/zh/contribute//custom_p5_build/ >中文</option></select><script>document.getElementById("locale-select")?.addEventListener("change",(function(){window.location.href=this.value}))</script><div><form action=/search method=GET role=search><label for=search-term>Search</label> <input aria-label="Search through site content" class="border border-black" id=search-term name=term required type=search> <button type=submit>Search</button></form></div><div>Language: en</div><div>Accessibility</div></div><h1 class="font-bold text-lg">Placeholder title</h1><span></span><main><h1 id=creating-a-custom-build-of-p5js-with-select-components>Creating a custom build of p5.js with select components</h1><h2 id=overview>Overview</h2><p>An excellent new <a href=https://github.com/processing/p5.js/pull/2051>feature</a> of p5.js allows user to build p5.js as a custom combination of its modules. This greatly helps in reducing the production version size of the library, as well as improves overall performance.</p><p>This feature was suggested as a part of a proposal for Google Summer of Code 2017.</p><h2 id=usage>Usage</h2><p>Currently, the usage is through invoking a Grunt task manually from the command line:</p><pre class="astro-code github-dark" style=background-color:#24292e;color:#e1e4e8;overflow-x:auto tabindex=0><code><span class=line><span style=color:#b392f0>git</span><span style=color:#9ecbff> clone</span><span style=color:#9ecbff> https://github.com/processing/p5.js.git</span></span>
<span class=line><span style=color:#79b8ff>cd</span><span style=color:#9ecbff> p5.js</span></span>
<span class=line><span style=color:#b392f0>npm</span><span style=color:#9ecbff> ci</span></span>
<span class=line><span style=color:#b392f0>npm</span><span style=color:#9ecbff> run</span><span style=color:#9ecbff> grunt</span></span>
<span class=line><span style=color:#b392f0>npm</span><span style=color:#9ecbff> run</span><span style=color:#9ecbff> grunt</span><span style=color:#9ecbff> combineModules:module_x:module_y</span></span></code></pre><p>Here, <code>module_n</code> refers to the name of the modules which you want to select. Multiple modules must be passed as shown above. Also, these modules must have the same name as their folders in <code>/src</code> directory to work correctly. While <code>core</code> is included by default, <code>core/shape</code> needs to be included for shapes like line() and other core features to work.</p><p>The above usage example will likely output a <code>p5Custom.js</code> larger than the complete <code>p5.min.js</code> as the output is not minified using the <code>uglify</code> task.</p><p>The recommended steps to reduce bundle size as much as possible are:</p><pre class="astro-code github-dark" style=background-color:#24292e;color:#e1e4e8;overflow-x:auto tabindex=0><code><span class=line><span style=color:#b392f0>git</span><span style=color:#9ecbff> clone</span><span style=color:#9ecbff> https://github.com/processing/p5.js.git</span></span>
<span class=line><span style=color:#79b8ff>cd</span><span style=color:#9ecbff> p5.js</span></span>
<span class=line><span style=color:#b392f0>npm</span><span style=color:#9ecbff> ci</span></span>
<span class=line><span style=color:#b392f0>npm</span><span style=color:#9ecbff> run</span><span style=color:#9ecbff> grunt</span></span>
<span class=line><span style=color:#b392f0>npm</span><span style=color:#9ecbff> run</span><span style=color:#9ecbff> grunt</span><span style=color:#9ecbff> combineModules:min:module_x:module_y</span><span style=color:#9ecbff> uglify</span></span></code></pre><h2 id=examples>Examples</h2><ul><li><p><code>npm run grunt combineModules:min:core/shape:color:math:image uglify</code><br/>Generates a <code>p5Custom.min.js</code> bundle in the <code>lib/modules</code> directory with the combineModules and uglify tasks. Note that modules should be listed after <code>combineModules:min</code> and the <code>uglify</code> task should have a space after the modules list.</p></li><li><p><code>npm run grunt combineModules:core/shape:color:math:image</code><br/>Generates a non-minified <code>p5Custom.js</code> bundle in the <code>lib/modules</code> directory.</p></li><li><p><code>npm run grunt combineModules:min:core/shape:color:math:image</code><br/>Generates a <code>p5Custom.pre-min.js</code> in the <code>lib/modules</code> directory with the <code>combineModules:min</code> task. Note that in this example <code>npm run grunt uglify</code> can be run separately after running the <code>combineModules:min</code> task.</p></li></ul></main><div>p5.js site footer goes here</div></body></html>