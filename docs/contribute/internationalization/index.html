<!DOCTYPE html><html><head><meta charset=utf-8><meta content="width=device-width,initial-scale=1" name=viewport><link href=/_astro/_slug_.C79K3bky.css rel=stylesheet /></head><body><nav><ul><a href=/ >Home</a> <a href=/reference>Reference</a> <a href=/tutorials>Tutorials</a> <a href=/examples>Examples</a> <a href=/community>Community</a> <a href=/about>About</a> <a href=/contribute>Contribute</a></ul></nav><div class="flex space-x-2"><select id=locale-select><option value=/contribute//internationalization/ selected=true>English</option><option value=/ar/contribute//internationalization/ >العربية</option><option value=/es/contribute//internationalization/ >español</option><option value=/hi/contribute//internationalization/ >हिन्दी</option><option value=/ko/contribute//internationalization/ >한국어</option><option value=/pt-br/contribute//internationalization/ >português (Brasil)</option><option value=/sk/contribute//internationalization/ >slovenčina</option><option value=/zh/contribute//internationalization/ >中文</option></select><script>document.getElementById("locale-select")?.addEventListener("change",(function(){window.location.href=this.value}))</script><div><form action=/search method=GET role=search><label for=search-term>Search</label> <input aria-label="Search through site content" class="border border-black" id=search-term name=term required type=search> <button type=submit>Search</button></form></div><div>Language: en</div><div>Accessibility</div></div><h1 class="font-bold text-lg">Placeholder title</h1><span></span><main><h1 id=-internationalization>🌐 Internationalization</h1><p><a href=https://developer.mozilla.org/docs/Glossary/Internationalization_and_localization>Internationalization</a> (sometimes abbreviated “i18n”) refers to supporting multiple languages in a software project. This often means maintaining translations of text strings used in the project and letting users choose which translation they receive (or detecting it from their browser settings).</p><p>p5.js uses internationalization in a bunch of areas (our contributor docs, <a href=https://p5js.org>the official website</a>, the reference, etc). We’re expanding to include the console output of p5.js (which is primarily developer-facing error messages) in our internationalization efforts.</p><h2 id=tooling>Tooling</h2><p>We’ve integrated <a href=https://www.i18next.com>i18next</a> into the codebase. Currently we only use it in the un-minified build of p5.js. <code>p5.min.js</code> only includes the outer layer of our internationalization code and does not use it.</p><h3 id=setup>Setup</h3><p>We set up our i18next integration in <code>src/core/internationalization.js</code> and the translations are in <code>translations/</code>.</p><p>We set up the translation engine and autodetect the user’s language from their browser settings before the p5 sketch is initialized. This ensures we can use translations for any errors we encounter in sketch <code>setup()</code> and <code>preload()</code>.</p><p>(If we encounter any errors in language autodetection, we fall back to English.)</p><h4 id=no-translations-in-p5minjs>No translations in <code>p5.min.js</code></h4><p>There is specific logic in the browserify build task and <code>src/core/init.js</code> to avoid loading or setting up translations in the minified build. Adding translations does not increase the size of the minified build.</p><h3 id=using-translations>Using translations</h3><p>To use translations include this line at the top of the file.</p><pre class="astro-code github-dark" style=background-color:#24292e;color:#e1e4e8;overflow-x:auto tabindex=0><code><span class=line><span style=color:#f97583>import</span><span style=color:#e1e4e8> { translator } </span><span style=color:#f97583>from</span><span style=color:#9ecbff> &#39;./internationalization&#39;</span><span style=color:#e1e4e8>;</span></span></code></pre><h3 id=simple-messages>Simple messages</h3><p>Without internationalization you might log a message with the text inline.</p><pre class="astro-code github-dark" style=background-color:#24292e;color:#e1e4e8;overflow-x:auto tabindex=0><code><span class=line><span style=color:#e1e4e8>console.</span><span style=color:#b392f0>log</span><span style=color:#e1e4e8>(</span><span style=color:#9ecbff>&#39;Loading your sketch right now!&#39;</span><span style=color:#e1e4e8>)</span></span></code></pre><p>Instead, you use <code>translator</code>:</p><pre class="astro-code github-dark" style=background-color:#24292e;color:#e1e4e8;overflow-x:auto tabindex=0><code><span class=line><span style=color:#e1e4e8>console.</span><span style=color:#b392f0>log</span><span style=color:#e1e4e8>(</span><span style=color:#b392f0>translator</span><span style=color:#e1e4e8>(</span><span style=color:#9ecbff>&#39;sketch.loading&#39;</span><span style=color:#e1e4e8>))</span></span></code></pre><p>This tells the translator to get the “<code>sketch.loading</code>” message in whatever language we’ve detected that the user prefers.</p><h4 id=dynamic-messages>Dynamic messages</h4><p>You can also inject variables into a translated message. For example,</p><pre class="astro-code github-dark" style=background-color:#24292e;color:#e1e4e8;overflow-x:auto tabindex=0><code><span class=line><span style=color:#e1e4e8>console.</span><span style=color:#b392f0>log</span><span style=color:#e1e4e8>(</span><span style=color:#9ecbff>&#39;I couldnt find &#39;</span><span style=color:#f97583> +</span><span style=color:#e1e4e8> file.name </span><span style=color:#f97583>+</span><span style=color:#9ecbff> &#39;. Are you sure it&#39;</span><span style=color:#e1e4e8>s there</span><span style=color:#f97583>?</span><span style=color:#9ecbff>&#39;</span><span style=color:#fdaeb7;font-style:italic>)</span></span></code></pre><p>would become something like</p><pre class="astro-code github-dark" style=background-color:#24292e;color:#e1e4e8;overflow-x:auto tabindex=0><code><span class=line><span style=color:#e1e4e8>console.</span><span style=color:#b392f0>log</span><span style=color:#e1e4e8>(</span><span style=color:#b392f0>translator</span><span style=color:#e1e4e8>(</span><span style=color:#9ecbff>&#39;fileLoading.notFound&#39;</span><span style=color:#e1e4e8>, { fileName: file.name }))</span></span></code></pre><p>Translations like this expect the variables it uses to have a certain name, so make sure you use that. Check a translation file (look in <code>translations/{YOUR_LANGUAGE}/</code>) to see what the variable name is. You’ll find the translation under the object path in the translation key.</p><p>”<code>fileLoading.notFound</code>” would be found at</p><pre class="astro-code github-dark" style=background-color:#24292e;color:#e1e4e8;overflow-x:auto tabindex=0><code><span class=line><span style=color:#e1e4e8>{</span></span>
<span class=line><span style=color:#79b8ff>  &quot;fileLoading&quot;</span><span style=color:#e1e4e8>: {</span></span>
<span class=line><span style=color:#79b8ff>    &quot;notFound&quot;</span><span style=color:#e1e4e8>: </span><span style=color:#9ecbff>&quot;I couldnt find {{fileName}}. Are you sure it&#39;s there?&quot;</span></span>
<span class=line><span style=color:#e1e4e8>  }</span></span>
<span class=line><span style=color:#e1e4e8>}</span></span></code></pre><p>Variables are framed in “<code>{{</code> <code>}}</code>”.</p><h3 id=modifying-translations>Modifying translations</h3><p>Simply open <code>translations/{YOUR_LANGUAGE}/translation.json</code>, find the translation with the key (like in the example just above) and edit away!</p><h3 id=adding-translations-for-new-languages>Adding translations for new languages</h3><p>The easiest way to do this is to add your language code (like “de” for German, “it” for Italian, etc) to the <a href=https://github.com/processing/p5.js/blob/84bc1f92c89786f48e5d6fd1045feb649b932eea/package.json#L111-L114>locales list</a> in <code>package.json</code> and then from the terminal run ’$ npm run build’.</p><p>This will generate you a fresh translations file in <code>translations/{LANGUAGE_CODE}/</code>! Now you can begin populating it with your fresh translations! 🥖</p><p>You’ll also need to add an entry for it in <a href=../translations/index.js><code>translations/index.js</code></a> and <a href=../translations/dev.js><code>translations/dev.js</code></a>. You can follow the pattern used in that file for <code>en</code> and <code>es</code>.</p><h3 id=testing-changes>Testing changes</h3><p>The bulk of translations are not included in the final library, but are hosted online and are automatically downloaded by p5.js when it needs them. Updates to these only happen whenever a new version of p5.js is released.</p><p>However, if you want to see your changes (or any other changes which aren’t released yet), you can simply run <code>npm run dev</code> which will build p5.js configured to use the translation files present locally on your computer, instead of the ones on the internet.</p><h3 id=further-reading>Further Reading</h3><p>See the <a href=https://www.i18next.com/translation-function/essentials>i18next translation function documentation</a>. Everything documented above is just a subset of their functionality.</p></main><div>p5.js site footer goes here</div></body></html>