<!DOCTYPE html><html><head><meta charset=utf-8><meta content="width=device-width,initial-scale=1" name=viewport><link href=/_astro/_slug_.C79K3bky.css rel=stylesheet /></head><body><nav><ul><a href=/ >Home</a> <a href=/reference>Reference</a> <a href=/tutorials>Tutorials</a> <a href=/examples>Examples</a> <a href=/community>Community</a> <a href=/about>About</a> <a href=/contribute>Contribute</a></ul></nav><div class="flex space-x-2"><select id=locale-select><option value=/contribute//project_wrapups/shubham_sharma_gsoc_2022/ selected=true>English</option><option value=/ar/contribute//project_wrapups/shubham_sharma_gsoc_2022/ >ÿßŸÑÿπÿ±ÿ®Ÿäÿ©</option><option value=/es/contribute//project_wrapups/shubham_sharma_gsoc_2022/ >espa√±ol</option><option value=/hi/contribute//project_wrapups/shubham_sharma_gsoc_2022/ >‡§π‡§ø‡§®‡•ç‡§¶‡•Ä</option><option value=/ko/contribute//project_wrapups/shubham_sharma_gsoc_2022/ >ÌïúÍµ≠Ïñ¥</option><option value=/pt-br/contribute//project_wrapups/shubham_sharma_gsoc_2022/ >portugu√™s (Brasil)</option><option value=/sk/contribute//project_wrapups/shubham_sharma_gsoc_2022/ >slovenƒçina</option><option value=/zh/contribute//project_wrapups/shubham_sharma_gsoc_2022/ >‰∏≠Êñá</option></select><script>document.getElementById("locale-select")?.addEventListener("change",(function(){window.location.href=this.value}))</script><div><form action=/search method=GET role=search><label for=search-term>Search</label> <input aria-label="Search through site content" class="border border-black" id=search-term name=term required type=search> <button type=submit>Search</button></form></div><div>Language: en</div><div>Accessibility</div></div><h1 class="font-bold text-lg">Placeholder title</h1><span></span><main><h1 id=gsoc-2022-wrap-up>GSoC-2022-Wrap-Up</h1><h2 id=improving-p5js-webgl-functionality>Improving p5.js WebGL functionality</h2><h4 id=by-shubham-kumar-sharmashenpaisharma--gsoc-2022>by Shubham Kumar Sharma(<a href=https://github.com/ShenpaiSharma>@ShenpaiSharma</a>) | GSoC 2022</h4><h3 id=overview>Overview</h3><p>The primary purpose over the course of this summer through GSoC 2022 was to focus on the refactoring of the WebGL rendering pipeline so that multiple materials can be applied to geometry simultaneously and implementing the missing feature of certain geometry in WebGL mode like corner radius is not accepted for the rectangle in WebGL mode, etc.</p><p>Key areas of my proposals were -</p><ul><li>Correcting the inappropriate behavior of certain geometry in WebGL mode.</li><li>Refactoring of the WebGL rendering pipeline so that multiple materials can be applied to geometry.</li></ul><h3 id=task-details>Task Details</h3><h2 id=correcting-the-inappropriate-behavior-of-rect-in-webgl-pr>Correcting the inappropriate behavior of rect() in WebGL: <a href=https://github.com/processing/p5.js/pull/5789>PR</a></h2><p>I started my GSoC 2022 work by addressing <a href=https://github.com/processing/p5.js/issues/5001>#issue5001</a>, rect() function takes eight parameters in which the last four parameters define the determined corner radius for the top-left, top-right, lower-right, and lower-left corners, respectively. But, even after passing these parameters, the rect() does nothing in WebGL mode. It could be confusing for beginners as, currently, p5.js doesn‚Äôt show errors related to it.</p><p>We took the approach that processing follows to implement rounded corners of a rectangle, i.e., using immediate mode; thus, we implemented it using vertex and quadraticVertex().</p><pre class="astro-code github-dark" style=background-color:#24292e;color:#e1e4e8;overflow-x:auto tabindex=0><code><span class=line><span>function setup() {</span></span>
<span class=line><span> // Create the canvas</span></span>
<span class=line><span> createCanvas(720, 400, WEBGL);</span></span>
<span class=line><span> background(200);</span></span>
<span class=line><span> </span></span>
<span class=line><span> // Set colors</span></span>
<span class=line><span> fill(204, 101, 192, 127);</span></span>
<span class=line><span> stroke(127, 63, 120);</span></span>
<span class=line><span> </span></span>
<span class=line><span> // A rectangle</span></span>
<span class=line><span> rect(-100, -100, 200, 80, 40, 1, 5, 1);</span></span>
<span class=line><span>}</span></span>
<span class=line><span> </span></span>
<span class=line><span></span></span></code></pre><p>Before: <img alt=image src=https://user-images.githubusercontent.com/47415702/189298839-4aac32dc-f74e-4f21-8637-05f2b2c22c82.png /></p><p>After: <img alt=image src=https://user-images.githubusercontent.com/47415702/189298948-55e9306a-8a5e-4a82-b208-dbdc725365d8.png /></p><h3 id=future-work>Future Work:</h3><p>While using higher strokeWeight, it starts showing artifacts, for more minor strokeWeight it looks fine; this issue actually exists while using the thicker strokeWeight, so for this, we need to look upon the stroke renderer much more closely.</p><p><img alt=image src=https://user-images.githubusercontent.com/47415702/189299200-25d111b6-b135-4573-8659-f24f6ea8d67c.png /></p><h2 id=multiple-materials-applied-to-geometry-pr>Multiple Materials applied to Geometry: <a href=https://github.com/processing/p5.js/pull/5774>PR</a></h2><p>Each object reacts to light differently in the real world. Steel items, for example, are often shinier than clay vases, and wooden containers do not respond to light in the same way that steel containers do. Some objects absorb light with little scattering, resulting in small specular highlights, while others scatter widely, resulting in a greater radius for the highlight.</p><p>So finally, we have decided to move away from the current overwriting of fill colors to the geometry towards the approach that Processing uses where the material has different color properties (ambient, emissive, specular) that all contribute separately to the lighting of the surface.</p><p>So we have implemented a few new uniforms (uSpecularMatColor, uAmbientMatColor, uEmissiveMatColor), which store the RGB colors and fill the geometry with different color properties and thus contributing separately to the lighting of the surface.</p><p>Code:</p><pre class="astro-code github-dark" style=background-color:#24292e;color:#e1e4e8;overflow-x:auto tabindex=0><code><span class=line><span>function setup() {</span></span>
<span class=line><span> createCanvas(600, 600, WEBGL);</span></span>
<span class=line><span> smooth(8);</span></span>
<span class=line><span> noStroke();</span></span>
<span class=line><span>}</span></span>
<span class=line><span>function draw() {</span></span>
<span class=line><span> background(0);</span></span>
<span class=line><span> </span></span>
<span class=line><span> ambientLight(128, 128, 128);</span></span>
<span class=line><span> </span></span>
<span class=line><span> directionalLight(128, 128, 128, cos(frameCount * 0.1), 1, -1);</span></span>
<span class=line><span> </span></span>
<span class=line><span> push();</span></span>
<span class=line><span> translate(-width * 0.25, 0, 0);</span></span>
<span class=line><span> </span></span>
<span class=line><span> ambientMaterial(255, 0, 0);</span></span>
<span class=line><span> specularMaterial(0, 0, 0);</span></span>
<span class=line><span> sphere(width * 0.2);</span></span>
<span class=line><span> </span></span>
<span class=line><span> pop();</span></span>
<span class=line><span> </span></span>
<span class=line><span> push();</span></span>
<span class=line><span> translate(width * 0.25, 0, 0);</span></span>
<span class=line><span> </span></span>
<span class=line><span> ambientMaterial(255, 0, 0);</span></span>
<span class=line><span> specularMaterial(255, 255, 255);</span></span>
<span class=line><span> sphere(width * 0.2);</span></span>
<span class=line><span> </span></span>
<span class=line><span> pop();</span></span>
<span class=line><span>}</span></span>
<span class=line><span> </span></span>
<span class=line><span> </span></span></code></pre><p>Before:</p><p><img alt=image src=https://user-images.githubusercontent.com/47415702/189299616-9e047451-0d3c-4cb8-b04d-aa37ae1f3572.png /></p><p>After:</p><p><img alt=image src=https://user-images.githubusercontent.com/47415702/189299695-92683040-c3e8-46e8-9fe3-331681535e33.png /></p><p>Effect of combining all the material propertied like fill(), ambientMaterial(), SpecularMaterial() and emissiveMaterial() over geometry now results in:</p><p><img alt=image src=https://user-images.githubusercontent.com/47415702/189299930-430735df-3aaa-46b5-8b4c-7fb1c7db6362.png /></p><h3 id=pull-requests>Pull Requests:</h3><ul><li><p>Added round corner property for rect() in WebGL mode. <a href=https://github.com/processing/p5.js/pull/5789>PR#5789</a></p></li><li><p>Feature Implemented ‚Äî Multiple Material support for geometry <a href=https://github.com/processing/p5.js/pull/5774>PR#5774</a></p></li></ul><h2 id=conclusion--acknowledgements>Conclusion &amp; Acknowledgements</h2><p>Thanks to my mentor <a href=https://github.com/calebfoss>@calebfoss</a> for all the guidance and feedback throughout the project, other contributors of p5.js, and the whole processing community for showing immense support and an encouraging environment, which helped me exceed my own expectations! Thank you so much üòÑ</p></main><div>p5.js site footer goes here</div></body></html>