<!DOCTYPE html><html><head><meta charset=utf-8><meta content="width=device-width,initial-scale=1" name=viewport><link href=/_astro/_slug_.C79K3bky.css rel=stylesheet /></head><body><nav><ul><a href=/ >Home</a> <a href=/reference>Reference</a> <a href=/tutorials>Tutorials</a> <a href=/examples>Examples</a> <a href=/community>Community</a> <a href=/about>About</a> <a href=/contribute>Contribute</a></ul></nav><div class="flex space-x-2"><select id=locale-select><option value=/contribute//project_wrapups/adilrabbani_gsoc_2018/ selected=true>English</option><option value=/ar/contribute//project_wrapups/adilrabbani_gsoc_2018/ >ÿßŸÑÿπÿ±ÿ®Ÿäÿ©</option><option value=/es/contribute//project_wrapups/adilrabbani_gsoc_2018/ >espa√±ol</option><option value=/hi/contribute//project_wrapups/adilrabbani_gsoc_2018/ >‡§π‡§ø‡§®‡•ç‡§¶‡•Ä</option><option value=/ko/contribute//project_wrapups/adilrabbani_gsoc_2018/ >ÌïúÍµ≠Ïñ¥</option><option value=/pt-br/contribute//project_wrapups/adilrabbani_gsoc_2018/ >portugu√™s (Brasil)</option><option value=/sk/contribute//project_wrapups/adilrabbani_gsoc_2018/ >slovenƒçina</option><option value=/zh/contribute//project_wrapups/adilrabbani_gsoc_2018/ >‰∏≠Êñá</option></select><script>document.getElementById("locale-select")?.addEventListener("change",(function(){window.location.href=this.value}))</script><div><form action=/search method=GET role=search><label for=search-term>Search</label> <input aria-label="Search through site content" class="border border-black" id=search-term name=term required type=search> <button type=submit>Search</button></form></div><div>Language: en</div><div>Accessibility</div></div><h1 class="font-bold text-lg">Placeholder title</h1><span></span><main><h1 id=implementing-missing-webgl-primitives>Implementing missing WebGL primitives</h1><h4 id=by-adil-rabbani-adilrabbani>by Adil Rabbani (<a href=https://github.com/AdilRabbani>@adilrabbani</a>)</h4><p>This summer I worked on improving p5.js WebGL mode, along side <a href=https://github.com/AidanNelson>Aidan Nelson</a> with the help of our mentors <a href=https://github.com/mlarghydracept>Stalgia Grigg</a> and <a href=https://github.com/kjhollen>Kate Hollenbach</a>. My tasks for the summer included implementing missing primitives in p5.js WebGL mode i.e arc, point, bezierVertex, curveVertex, quadraticVertex and text.</p><h2 id=contribution>Contribution</h2><p>My first contribution to p5.js was when I was writing my GSOC proposal. This was just a minor change in <a href=https://github.com/processing/p5.js/pull/2737>reference examples</a> for curves and some examples for <a href=https://github.com/processing/p5.js/pull/2798>vertex()</a>. These small changes helped me in understanding the use of grunt, lint, and other node modules being used in the build process. I was really happy (and surprised) when my proposal got accepted üòÑ. I was about to contribute to one of my favourite libraries. We had a shared branch on <a href=https://github.com/processing/p5.js/tree/webgl-gsoc-2018>git</a> where we would compare our pull requests to be merged.</p><h3 id=arc>arc</h3><p>I started by going through <a href=https://github.com/processing/p5.js/tree/main/test/manual-test-examples/webgl>manual examples</a>, debugging them in browser and watching the code jump from function to function. I have to admit though, it was a little daunting at first. My first task was to implement arc for WebGL mode and so I decided to go through already implemented ellipse and debugging it in the chrome editor.</p><p>The code started to make sense after a while and I started to make small changes so as to move forward in implementing arc. Before my first evaluation I was able to implement arc <a href=https://github.com/processing/p5.js/pull/2942>#2942</a> with all three modes (OPEN, PIE, CHORD) and add documentation and <a href=https://github.com/processing/p5.js/tree/webgl-gsoc-2018/test/manual-test-examples/webgl/arc>test examples</a>. Ellipse was now refactored by using the same arc implementation. This closed issue <a href=https://github.com/processing/p5.js/issues/2181>#2181</a>.</p><h3 id=point>point</h3><p>WebGL by default renders square points. Looking through some resources on web gave me an idea of discarding pixels from a square point further to render a circular point. Adding the shader in p5.js was relatively simple. But I was stuck on a bug for a while that didn‚Äôt go off no matter what. Thankfully with the help of my mentor I was able to debug it and come up with a solution.</p><p>One small problem was still there though. A good approach on rendering points would be to use the default square point when the size of the point was really small and when it became big enough, it should render good looking circular points. I posted this issue on Github and <a href=https://github.com/aferriss>Adam Ferris</a> who have been working on this before, suggested to use his shader which worked the same way as mentioned. Read the discussion <a href=https://github.com/processing/p5.js/issues/3017>here</a>. Finally, I opened a <a href=https://github.com/processing/p5.js/pull/3031>pull request</a> for point and added two test examples for the primitive. This closed issue <a href=https://github.com/processing/p5.js/issues/2662>#2662</a> and <a href=https://github.com/processing/p5.js/issues/2184>#2184</a></p><h3 id=beziervertex-curvevertex-and-quadraticvertex>bezierVertex, curveVertex and quadraticVertex</h3><p>I decided to go for curves next. I went through a great <a href=https://pomax.github.io/bezierinfo/ >article</a> on bezier curves for this task. Reading the article I came to know that a bezier curve can be easily converted to Catmull Rom Splines so this meant that if I was able to implement bezierVertex, implementing curveVertex was relatively simple (just converting the points). While quadraticVertex can be implemented by changing the formula used to compute coefficients for curves.</p><p>I finally added the required functions and started testing curves. Everything worked quite well, except just one. Filling curves gave weird results. At first, I thought maybe there was something wrong going on in my code but a further researching revealed that we can‚Äôt just fill curves with all the intersections and loops without a proper triangulation algorithm. After approval from Kate and Stalgia, I started testing different triangulation libraries (<a href=https://github.com/mapbox/earcut>Earcut</a>, <a href=https://github.com/brendankenny/libtess.js/ >Libtess</a>, <a href=https://github.com/diatomic/tess2>Tess2</a>). Earcut was the most precise but wasn‚Äôt giving correct results. After a quick discussion with Earcut‚Äôs creator, it was decided that Earcut wasn‚Äôt a good option for us.</p><p>Tess2 wasn‚Äôt really a good option either. It wasn‚Äôt giving correct results and was too big in size. Libtess seemed to work really well and this was also because it was based on the same <a href=https://github.com/processing/processing-android/tree/main/core/src/processing/opengl/tess>GLU Tesselator implementation</a> that was being used in Processing. The only problem with Libtess was that it was quite bigger than Earcut. We contacted <a href=https://github.com/lmccart>Lauren</a> if it was okay with integrating this library for the triangulation part. She encouraged us by saying that we can add the library as a node module just as opentype was being used for 2D text in p5.js. After integrating libtess, I decided to improve the code further for some performance gains. I was able to implement a look up table with the help of which, we wouldn‚Äôt need to compute coefficients after rendering curve, the first time. This was a huge performance boost from the previous trivial implementation. All that was left was to submit a <a href=https://github.com/processing/p5.js/pull/3085>pull request</a> with an <a href=https://github.com/processing/p5.js/tree/webgl-gsoc-2018/test/manual-test-examples/webgl/curves>example</a> showcasing what you can do with WebGL curves in p5.js. This closed issues <a href=https://github.com/processing/p5.js/issues/2185>#2185</a>, <a href=https://github.com/processing/p5.js/issues/2186>#2186</a> and <a href=https://github.com/processing/p5.js/issues/2187>#2187</a>.</p><h3 id=text>text</h3><p>Now I had one big task left : Implementing text for p5.js WebGL mode. Let me just mention one thing though, ‚ÄúOne does not simply implement text in WebGL üò•‚Äú</p><p>I went through different methods for rendering text in WebGL. At the end I was able to pick 2 methods that looked perfect for rendering text. The first one was <a href=http://hack.chrons.me/opengl-text-rendering/ >Signed Distance Field Rendering</a>. The other being a <a href=http://wdobbie.com/post/gpu-text-rendering-with-vector-textures/ >GPU based rendering</a> approach. After a <a href=https://github.com/processing/p5.js/issues/2183>discussion</a> on github we decided to go for the GPU based approach. I was not able to implement this approach as <a href=https://github.com/Spongman>Spongman</a> had already done most of the work for text using the same technique. We decided to pull that implementation and polish it further (looking for bugs, improvements) instead of writing everything from scratch. The pull request is being reviewed <a href=https://github.com/processing/p5.js/pull/3110>here</a>.</p><h3 id=other-minor-contributions>Other minor contributions</h3><p>Fixed a minor issue with triangle stroke in 2D mode <a href=https://github.com/processing/p5.js/pull/3075>#3075</a> closing <a href=https://github.com/processing/p5.js/issues/3065>#3065</a>. Ported some examples from Processing to p5.js <a href=https://github.com/processing/p5.js-website/pull/242>#242</a>.</p><h2 id=support>Support</h2><p>Any questions pertaining to this project may be addressed via Issues on the <a href=https://github.com/processing/p5.js>p5.js repository</a>. Simply create a new Issue and either assign or tag me in the conversation with @adilrabbani. For anything else, don‚Äôt hesitate to get in touch at <a href=mailto:14bscsarabbani@seecs.edu.pk>14bscsarabbani@seecs.edu.pk</a>!</p><h2 id=conclusion>Conclusion</h2><p>I learned a lot this summer. I would like to thank my mentor, <a href=https://github.com/mlarghydracept>Stalgia Grigg</a> for all the guidance and help throughout the project as well as all the members of Processing Foundation for giving me a chance to contribute to this library.</p><p>Thanks everyone! üòÉ</p></main><div>p5.js site footer goes here</div></body></html>