<!DOCTYPE html><html><head><meta charset=utf-8><meta content="width=device-width,initial-scale=1" name=viewport><link href=/_astro/_slug_.C79K3bky.css rel=stylesheet /></head><body><nav><ul><a href=/ >Home</a> <a href=/reference>Reference</a> <a href=/tutorials>Tutorials</a> <a href=/examples>Examples</a> <a href=/community>Community</a> <a href=/about>About</a> <a href=/contribute>Contribute</a></ul></nav><div class="flex space-x-2"><select id=locale-select><option value=/contribute//friendly_error_system/ selected=true>English</option><option value=/ar/contribute//friendly_error_system/ >ÿßŸÑÿπÿ±ÿ®Ÿäÿ©</option><option value=/es/contribute//friendly_error_system/ >espa√±ol</option><option value=/hi/contribute//friendly_error_system/ >‡§π‡§ø‡§®‡•ç‡§¶‡•Ä</option><option value=/ko/contribute//friendly_error_system/ >ÌïúÍµ≠Ïñ¥</option><option value=/pt-br/contribute//friendly_error_system/ >portugu√™s (Brasil)</option><option value=/sk/contribute//friendly_error_system/ >slovenƒçina</option><option value=/zh/contribute//friendly_error_system/ >‰∏≠Êñá</option></select><script>document.getElementById("locale-select")?.addEventListener("change",(function(){window.location.href=this.value}))</script><div><form action=/search method=GET role=search><label for=search-term>Search</label> <input aria-label="Search through site content" class="border border-black" id=search-term name=term required type=search> <button type=submit>Search</button></form></div><div>Language: en</div><div>Accessibility</div></div><h1 class="font-bold text-lg">Placeholder title</h1><span></span><main><h1 id=-p5js-friendly-error-system-fes>üå∏ p5.js Friendly Error System (FES)</h1><h2 id=overview>Overview</h2><p>The Friendly Error System (FES, üå∏) aims to help new programmers by providing error messages in simple, friendly language. It supplements your browser‚Äôs console error messages by adding an alternative description of the error and links to helpful references.</p><p>The FES prints messages in the console window, as seen in the <a href=https://editor.p5js.org/ >p5.js Web Editor</a> and your browser JavaScript console. The single minified file of p5 (p5.min.js) omits the FES.</p><h2 id=lowering-the-barriers-to-debugging>Lowering the Barriers to Debugging</h2><p>The design of a tool should match the need of the people who will use it. As a tool that aims to lower the barriers to debugging, the design of FES is no exception.</p><p>The best way to evaluate our existing design is to hear directly from people using p5.js. We ran a community survey in 2021 to gather feedback and future wishes for Friendly Errors.</p><p>We believe the insights from our community members will be helpful for our contributors. You can see the results through the summary comic or the full report:</p><ul><li><a href=https://almchung.github.io/p5jsFESsurvey/ >21-22 FES Survey Report Comic</a></li><li><a href=https://observablehq.com/@almchung/p5-fes-21-survey>21-22 FES Survey Full Report</a></li></ul><h2 id=writing-friendly-error-messages>Writing Friendly Error Messages</h2><p>How to contribute to the p5.js library by writing and translating error messages?</p><p>The FES is a part of the p5.js‚Äô <a href=https://github.com/processing/p5.js/blob/main/contributor_docs/internationalization.md>internationalization</a> effort. We generate all FES messages‚Äô content through <a href=https://www.i18next.com/ >i18next</a>-based <code>translator()</code> function. This dynamic error message generation happens for all languages, including English - the default language of the p5.js.</p><p>We welcome contributions from all around the world! üåê</p><h4 id=writing-best-practices>Writing Best Practices</h4><p>FES message writers should prioritize lowering the barrier of understanding error messages and increasing the accessibility of debugging process.</p><p><a href=https://almchung.github.io/p5-fes-i18n-book/ >Friendly Errors i18n Book</a> discusses challenges and best practices for writing friendly error messages within the cross-cultural i18n context. Here are some points from the book:</p><ul><li>Understand your audience: do not make assumptions about the audience of our error messages. Try to learn who is using our library and how they use it.</li><li>Keep language inclusive. We strive to make error messages ‚Äúfriendly,‚Äù what does it mean for you? Look for possible bias and harm in your language. Adhere to <a href=https://github.com/processing/p5.js/blob/main/CODE_OF_CONDUCT.md#p5js-code-of-conduct>p5.js Code of Conduct</a>.</li><li>Use simple sentences whenever possible. Consider breaking your sentence into smaller blocks for best utilizing i18next‚Äôs <a href=https://www.i18next.com/translation-function/interpolation>interpolation</a> feature.</li><li>Prioritize cross-cultural communication and provide a great experience across languages. Avoid using figures of speech.</li><li>Introduce one technical concept or technical term at a time. Keep consistency in technical writing. Try to link one external resource written in a beginner-friendly language with plenty of short, practical examples.</li></ul><p><a href=https://almchung.github.io/p5-fes-i18n-book/ >Friendly Errors i18n Book</a> is a public project, and you can contribute to the book through this separate <a href=https://github.com/almchung/p5-fes-i18n-book>repo</a>.</p><h4 id=location-of-translation-files>Location of Translation Files</h4><p><code>translator()</code> is based on i18next and imported from <code>src/core/internationalization.js</code>. It generates messages by looking up text data from a JSON translation file:</p><pre class="astro-code github-dark" style=background-color:#24292e;color:#e1e4e8;overflow-x:auto tabindex=0><code><span class=line><span>translations/{{detected locale code, default=en}}/translation.json</span></span></code></pre><p>Example: If the detected browser locale is Korean (language designator: <code>ko</code>), the <code>translator()</code> will read in translated text blocks from <code>translations/ko/translation.json</code>. Then <code>translator()</code> will assemble the text blocks into the final message.</p><p>The language designator can also include regional information, such as <code>es-PE</code> (Spanish from Peru).</p><h4 id=structure-of-translation-files>Structure of Translation Files</h4><p><code>translation.json</code> has a <a href=https://www.i18next.com/misc/json-format>format used by i18next</a>.</p><p>The basic format of a translation file‚Äôs item has a key and a value (message) in double quotation marks <code>&quot;&quot;</code>, closed by the curly brackets <code>{}</code>:</p><pre class="astro-code github-dark" style=background-color:#24292e;color:#e1e4e8;overflow-x:auto tabindex=0><code><span class=line><span style=color:#e1e4e8>{ </span><span style=color:#79b8ff>&quot;key&quot;</span><span style=color:#e1e4e8>: </span><span style=color:#9ecbff>&quot;value&quot;</span><span style=color:#e1e4e8> }</span></span></code></pre><p>For example, we have a ASCII logo saved in this format:</p><pre class="astro-code github-dark" style=background-color:#24292e;color:#e1e4e8;overflow-x:auto tabindex=0><code><span class=line><span style=color:#9ecbff>&quot;logo&quot;</span><span style=color:#e1e4e8>: </span><span style=color:#9ecbff>&quot;    _ </span><span style=color:#79b8ff>\n</span><span style=color:#9ecbff> /</span><span style=color:#79b8ff>\\</span><span style=color:#9ecbff>| |/</span><span style=color:#79b8ff>\\</span><span style=color:#79b8ff> \n</span><span style=color:#79b8ff> \\</span><span style=color:#9ecbff> ` &#39; /  </span><span style=color:#79b8ff>\n</span><span style=color:#9ecbff> / , . </span><span style=color:#79b8ff>\\</span><span style=color:#79b8ff>  \n</span><span style=color:#79b8ff> \\</span><span style=color:#9ecbff>/|_|</span><span style=color:#79b8ff>\\</span><span style=color:#9ecbff>/ </span><span style=color:#79b8ff>\n\n</span><span style=color:#9ecbff>&quot;</span></span></code></pre><p>i18next supports interpolation, which allows us to pass a variable to generate a message dynamically. We use curly brackets twice <code>{{}}</code> to set a placeholder of the variable:</p><pre class="astro-code github-dark" style=background-color:#24292e;color:#e1e4e8;overflow-x:auto tabindex=0><code><span class=line><span style=color:#9ecbff>&quot;greeting&quot;</span><span style=color:#e1e4e8>: </span><span style=color:#9ecbff>&quot;Hello, {{who}}!&quot;</span></span></code></pre><p>Here, the key is <code>greeting</code>, and the variable name is <code>who</code>.</p><p>To dynamically generate this message, we will need to pass a value:</p><pre class="astro-code github-dark" style=background-color:#24292e;color:#e1e4e8;overflow-x:auto tabindex=0><code><span class=line><span>translator(&#39;greeting&#39;, { who: &#39;everyone&#39; } );</span></span></code></pre><p>The result generated by <code>translator</code> will look like this:</p><pre class="astro-code github-dark" style=background-color:#24292e;color:#e1e4e8;overflow-x:auto tabindex=0><code><span class=line><span>Hello, everyone!</span></span></code></pre><p>Here is an item from <code>fes</code>‚Äôs <code>fileLoadError</code> that demonstrates interpolation:</p><pre class="astro-code github-dark" style=background-color:#24292e;color:#e1e4e8;overflow-x:auto tabindex=0><code><span class=line><span style=color:#9ecbff>&quot;image&quot;</span><span style=color:#e1e4e8>: </span><span style=color:#9ecbff>&quot;It looks like there was a problem loading your image. {{suggestion}}&quot;</span></span></code></pre><p>To dynamically generate the final message, the FES will call <code>translator()</code> with the key and a pre-generated <code>suggestion</code> value.</p><pre class="astro-code github-dark" style=background-color:#24292e;color:#e1e4e8;overflow-x:auto tabindex=0><code><span class=line><span>translator(&#39;fes.fileLoadError.image&#39;, { suggestion });</span></span></code></pre><h4 id=how-to-add-or-modify-translation>How to Add or Modify Translation</h4><p>The <a href=https://github.com/processing/p5.js/blob/main/contributor_docs/internationalization.md>internationalization doc</a> has a step-by-step guide on adding and modifying translation files.</p><h2 id=understanding-how-fes-works>Understanding How FES Works</h2><p>In this section, we will give an overview of how FES generates and displays messages. For more detailed information on the FES functions, please see our <a href=https://github.com/processing/p5.js/tree/main/src/core/friendly_errors#fes-reference-and-notes-from-developers>FES Reference + Dev Notes</a>.</p><h4 id=overview-1>Overview</h4><p>p5.js calls the FES from multiple locations for different situations, when:</p><ul><li>The browser throws an error.</li><li>The user code calls a function from the p5.js API.</li><li>Other custom cases where the user would benefit from a help message.</li></ul><h4 id=fes-code-location>FES Code Location</h4><p>You can find the core components of the FES inside: <code>src/core/friendly_errors</code>. You can find the translation files used by the <code>translator()</code> inside: <code>translations/</code>.</p><h4 id=fes-message-generators>FES Message Generators</h4><p>These functions are mainly responsible for catching errors and generating FES messages:</p><ul><li><a href=https://github.com/processing/p5.js/blob/main/contributor_docs/fes_reference_dev_notes.md#_friendlyfileloaderror><code>_friendlyFileLoadError()</code></a> catches file loading errors.</li><li><a href=https://github.com/processing/p5.js/blob/main/contributor_docs/fes_reference_dev_notes.md#validateparameters><code>_validateParameters()</code></a> checks a p5.js function‚Äôs input parameters based on inline documents.</li><li>[<code>_fesErrorMonitor()</code>] handles global errors.</li></ul><p>For full reference, please see our <a href=https://github.com/processing/p5.js/blob/main/contributor_docs/fes_reference_dev_notes.md>Dev Notes</a>.</p><h4 id=fes-message-displayer>FES Message Displayer</h4><p><code>fes_core.js/_friendlyError()</code> prints generated friendly error messages in the console. For example:</p><pre class="astro-code github-dark" style=background-color:#24292e;color:#e1e4e8;overflow-x:auto tabindex=0><code><span class=line><span>p5._friendlyError(</span></span>
<span class=line><span>  translator(&#39;fes.globalErrors.type.notfunc&#39;, translationObj)</span></span>
<span class=line><span>);</span></span></code></pre><p>This function can be called anywhere in p5.</p><h2 id=turning-off-the-fes>Turning Off the FES</h2><p>There may be cases where you want to <a href=https://github.com/processing/p5.js/wiki/Optimizing-p5.js-Code-for-Performance#disable-the-friendly-error-system-fes>disable the FES for performance</a>.</p><p><code>p5.disableFriendlyErrors</code> allows you to turn off the FES when set to <code>true</code>.</p><p>Example:</p><pre class="astro-code github-dark" style=background-color:#24292e;color:#e1e4e8;overflow-x:auto tabindex=0><code><span class=line><span>p5.disableFriendlyErrors = true;</span></span>
<span class=line><span></span></span>
<span class=line><span>function setup() {</span></span>
<span class=line><span>  createCanvas(100, 50);</span></span>
<span class=line><span>}</span></span></code></pre><p>The single minified file of p5 (i.e., p5.min.js) automatically omits the FES.</p></main><div>p5.js site footer goes here</div></body></html>