<!DOCTYPE html><html><head><meta charset=utf-8><meta content="width=device-width,initial-scale=1" name=viewport><link href=/_astro/_slug_.C79K3bky.css rel=stylesheet /></head><body><nav><ul><a href=/ >Home</a> <a href=/reference>Reference</a> <a href=/tutorials>Tutorials</a> <a href=/examples>Examples</a> <a href=/community>Community</a> <a href=/about>About</a> <a href=/contribute>Contribute</a></ul></nav><div class="flex space-x-2"><select id=locale-select><option value=/contribute//project_wrapups/wong_gsoc_2023/ selected=true>English</option><option value=/ar/contribute//project_wrapups/wong_gsoc_2023/ >العربية</option><option value=/es/contribute//project_wrapups/wong_gsoc_2023/ >español</option><option value=/hi/contribute//project_wrapups/wong_gsoc_2023/ >हिन्दी</option><option value=/ko/contribute//project_wrapups/wong_gsoc_2023/ >한국어</option><option value=/pt-br/contribute//project_wrapups/wong_gsoc_2023/ >português (Brasil)</option><option value=/sk/contribute//project_wrapups/wong_gsoc_2023/ >slovenčina</option><option value=/zh/contribute//project_wrapups/wong_gsoc_2023/ >中文</option></select><script>document.getElementById("locale-select")?.addEventListener("change",(function(){window.location.href=this.value}))</script><div><form action=/search method=GET role=search><label for=search-term>Search</label> <input aria-label="Search through site content" class="border border-black" id=search-term name=term required type=search> <button type=submit>Search</button></form></div><div>Language: en</div><div>Accessibility</div></div><h1 class="font-bold text-lg">Placeholder title</h1><span></span><main><h1 id=supporting-shader-based-filters-in-p5js>Supporting shader-based filters in p5js</h1><p>By <a href=https://wonger.dev>Justin Wong</a></p><table><thead><tr><th>Faster image filters</th><th>Less boilerplate for shader code</th></tr></thead><tbody><tr><td><video src=https://github.com/wong-justin/p5.js/assets/28441593/41edb6b9-ef4c-4b2e-8b22-2237da4617d9>filter(), before and after</video></td><td><img alt="2D shader setup, before and after" src=https://github.com/wong-justin/p5.js/assets/28441593/6bbd1627-3a01-4911-8c5c-992d63538b96 /></td></tr><tr><td><a href=https://editor.p5js.org/jwong/sketches/oG9AOomYm>old filter() sketch</a></td><td><a href=https://editor.p5js.org/jwong/sketches/ehXcWtycm>old 2D shader sketch</a></td></tr><tr><td><a href=https://editor.p5js.org/jwong/sketches/nWmTF8UED>new filter() sketch</a></td><td><a href=https://editor.p5js.org/jwong/sketches/T96caQxWq>new 2D shader sketch</a></td></tr></tbody></table><p>My work centered around the <code>filter()</code> function because it was too slow. I made it faster by using shaders, which are programs that use the GPU for image processing. Now people can use effects like blur without noticing such a drop in performance.</p><p>There were some secondary accomplishments as well. There’s a new function <code>createFilterShader()</code> that makes writing shaders easier. I helped revise a few documentation pages. I also tried to contribute some benchmarking tools, but that was a bit ambitious. All of these changes make shaders and image filters more accessible.</p><p>I enjoyed the experience and learned a lot. In fact, I learned so much that I wrote <a href=https://wonger.dev/posts/gsoc.html>another post</a> on my website. That post is more about the GSoC experience in general, especially aimed at newcomers, and not so much about p5js details.</p><p>Many thanks to my mentors for all their support: Adam Ferriss, Austin Slominski, and So Sun Park. Thanks also to other maintainers like Dave Pagurek, Kenneth Lim, and Qianqian Ye for helping along the way.</p><h2 id=work-completed>Work Completed</h2><ul><li><a href=https://github.com/processing/p5.js/pull/6167>Initial pull request</a>, just some documentation. Status: merged</li><li><a href=https://github.com/processing/p5.js/pull/6237>Second pull request</a>, mostly internal changes to enable new shaders. Status: merged</li><li><a href=https://github.com/processing/p5.js/pull/6324>Third pull request</a>, replacing the old filters with new shader filters. Status: merged</li></ul><h3 id=public-documentation-pages>Public documentation pages:</h3><ul><li><a href=https://p5js.org/reference/#/p5/WEBGL>WEBGL</a> - Status: merged, page created</li><li><a href=https://p5js.org/reference/#/p5/filter>filter()</a> - Status: merged, page not updated yet</li><li><a href=https://p5js.org/reference/#/p5/createFilterShader>createFilterShader()</a> - Status: merged, page not created yet</li></ul><h3 id=performance-measuring-helpers>Performance measuring helpers:</h3><ul><li><a href=https://jsperf.app/sideci>JSPerf benchmarks</a> for comparing two different p5js builds. Status: flopped. It was difficult to set up the tests inside the sketch, and results were inconclusive</li></ul><h2 id=potential-improvements>Potential improvements:</h2><ol><li>I think there should be some refactoring to cut down on all the graphics layers swimming around - maybe by using framebuffers, or maybe just by understanding and wrangling the canvases better.</li><li>There’s some alternative blur filters worth investigating. There’s an issue opened now to try for a better quality gaussian blur shader that still adjusts according to user input.</li><li>Performance could still be improved. Filters in WEBGL mode work well, getting 60 fps on my machine. But transferring filtered content to a default P2D renderer from a hidden WEBGL renderer results in about 20 fps. It also seems like performance suffers on mobile GPUs.</li></ol></main><div>p5.js site footer goes here</div></body></html>